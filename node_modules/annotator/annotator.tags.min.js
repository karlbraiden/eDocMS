/*
** Annotator v2.0.0-dev-41928d6
** https://github.com/okfn/annotator/
**
** Copyright 2014, the Annotator project contributors.
** Dual licensed under the MIT and GPLv3 licenses.
** https://github.com/okfn/annotator/blob/master/LICENSE
**
** Built at: 2014-04-11 02:53:43Z
*/
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self);var e=n;e=e.Annotator||(e.Annotator={}),e=e.Plugin||(e.Plugin={}),e.Tags=t()}}(function(){return function t(n,e,o){function i(a,u){if(!e[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=e[a]={exports:{}};n[a][0].call(l.exports,function(t){var e=n[a][1][t];return i(e?e:t)},l,l.exports,t,n,e,o)}return e[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({"4hR4NO":[function(t,n){(function(t){var e,o,i;if("undefined"!=typeof o&&null!==o&&(o=o),"undefined"!=typeof t&&null!==t&&null==o&&(o=t),"undefined"!=typeof window&&null!==window&&null==o&&(o=window),e=null!=o?o.Annotator:void 0,null==e&&(e=(null!=o?null!=(i=o.define)?i.amd:void 0:void 0)?null!=o?o.require("annotator"):void 0:void 0),"function"!=typeof e)throw new Error("Could not find Annotator! In a webpage context, please ensure that the Annotator script tag is loaded before any plugins.");n.exports=e}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],annotator:[function(t,n){n.exports=t("4hR4NO")},{}],3:[function(t,n){var e,o,i,r=function(t,n){return function(){return t.apply(n,arguments)}},a={}.hasOwnProperty,u=function(t,n){function e(){this.constructor=t}for(var o in n)a.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};o=t("annotator"),e=o.Util.$,i=function(t){function n(){return this.setAnnotationTags=r(this.setAnnotationTags,this),this.updateField=r(this.updateField,this),n.__super__.constructor.apply(this,arguments)}return u(n,t),n.prototype.options={parseTags:function(t){var n;return t=e.trim(t),n=[],t&&(n=t.split(/\s+/)),n},stringifyTags:function(t){return t.join(" ")}},n.prototype.field=null,n.prototype.input=null,n.prototype.pluginInit=function(){return o.supported()?(this.field=this.annotator.editor.addField({label:o._t("Add some tags here")+"â€¦",load:this.updateField,submit:this.setAnnotationTags}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:o._t("Tag"),property:"tags",isFiltered:n.filterCallback}),this.input=e(this.field).find(":input")):void 0},n.prototype.parseTags=function(t){return this.options.parseTags(t)},n.prototype.stringifyTags=function(t){return this.options.stringifyTags(t)},n.prototype.updateField=function(t,n){var e;return e="",n.tags&&(e=this.stringifyTags(n.tags)),this.input.val(e)},n.prototype.setAnnotationTags=function(t,n){return n.tags=this.parseTags(this.input.val())},n.prototype.updateViewer=function(t,n){return t=e(t),n.tags&&e.isArray(n.tags)&&n.tags.length?t.addClass("annotator-tags").html(function(){var t;return t=e.map(n.tags,function(t){return'<span class="annotator-tag">'+o.Util.escape(t)+"</span>"}).join(" ")}):t.remove()},n}(o.Plugin),i.filterCallback=function(t,n){var e,o,i,r,a,u,s,l;if(null==n&&(n=[]),i=0,o=[],t)for(o=t.split(/\s+/g),a=0,s=o.length;s>a;a++)if(e=o[a],n.length)for(u=0,l=n.length;l>u;u++)r=n[u],-1!==r.indexOf(e)&&(i+=1);return i===o.length},o.Plugin.register("Tags",i),n.exports=i},{}]},{},[3])(3)});
//# sourceMappingURL=annotator.tags.min.js.map