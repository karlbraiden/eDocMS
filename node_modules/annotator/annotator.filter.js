/*
** Annotator v2.0.0-dev-41928d6
** https://github.com/okfn/annotator/
**
** Copyright 2014, the Annotator project contributors.
** Dual licensed under the MIT and GPLv3 licenses.
** https://github.com/okfn/annotator/blob/master/LICENSE
**
** Built at: 2014-04-11 02:53:37Z
*/
!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self);var o=n;o=o.Annotator||(o.Annotator={}),o=o.Plugin||(o.Plugin={}),o.Filter=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"4hR4NO":[function(_dereq_,module,exports){
(function (global){
var Annotator, self, _ref;

if (typeof self !== "undefined" && self !== null) {
  self = self;
}

if (typeof global !== "undefined" && global !== null) {
  if (self == null) {
    self = global;
  }
}

if (typeof window !== "undefined" && window !== null) {
  if (self == null) {
    self = window;
  }
}

Annotator = self != null ? self.Annotator : void 0;

if (Annotator == null) {
  Annotator = (self != null ? (_ref = self.define) != null ? _ref.amd : void 0 : void 0) ? self != null ? self.require('annotator') : void 0 : void 0;
}

if (typeof Annotator !== 'function') {
  throw new Error("Could not find Annotator! In a webpage context, please ensure that the Annotator script tag is loaded before any plugins.");
}

module.exports = Annotator;


}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"annotator":[function(_dereq_,module,exports){
module.exports=_dereq_('4hR4NO');
},{}],3:[function(_dereq_,module,exports){
var $, Annotator, Filter, _t,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Annotator = _dereq_('annotator');

$ = Annotator.Util.$;

_t = Annotator._t;

Filter = (function(_super) {
  __extends(Filter, _super);

  Filter.prototype.events = {
    ".annotator-filter-property input focus": "_onFilterFocus",
    ".annotator-filter-property input blur": "_onFilterBlur",
    ".annotator-filter-property input keyup": "_onFilterKeyup",
    ".annotator-filter-previous click": "_onPreviousClick",
    ".annotator-filter-next click": "_onNextClick",
    ".annotator-filter-clear click": "_onClearClick"
  };

  Filter.prototype.classes = {
    active: 'annotator-filter-active',
    hl: {
      hide: 'annotator-hl-filtered',
      active: 'annotator-hl-active'
    }
  };

  Filter.prototype.html = {
    element: "<div class=\"annotator-filter\">\n  <strong>" + (_t('Navigate:')) + "</strong>\n  <span class=\"annotator-filter-navigation\">\n    <button type=\"button\"\n            class=\"annotator-filter-previous\">" + (_t('Previous')) + "</button>\n    <button type=\"button\"\n            class=\"annotator-filter-next\">" + (_t('Next')) + "</button>\n  </span>\n  <strong>" + (_t('Filter by:')) + "</strong>\n</div>",
    filter: "<span class=\"annotator-filter-property\">\n  <label></label>\n  <input/>\n  <button type=\"button\"\n          class=\"annotator-filter-clear\">" + (_t('Clear')) + "</button>\n</span>"
  };

  Filter.prototype.options = {
    appendTo: 'body',
    filters: [],
    addAnnotationFilter: true,
    isFiltered: function(input, property) {
      var keyword, _i, _len, _ref;
      if (!(input && property)) {
        return false;
      }
      _ref = input.split(/\s+/);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        keyword = _ref[_i];
        if (property.indexOf(keyword) === -1) {
          return false;
        }
      }
      return true;
    }
  };

  function Filter(element, options) {
    this._onPreviousClick = __bind(this._onPreviousClick, this);
    this._onNextClick = __bind(this._onNextClick, this);
    this._onFilterKeyup = __bind(this._onFilterKeyup, this);
    this._onFilterBlur = __bind(this._onFilterBlur, this);
    this._onFilterFocus = __bind(this._onFilterFocus, this);
    this.updateHighlights = __bind(this.updateHighlights, this);
    var _base;
    element = $(this.html.element).appendTo((options != null ? options.appendTo : void 0) || this.options.appendTo);
    Filter.__super__.constructor.call(this, element, options);
    (_base = this.options).filters || (_base.filters = []);
    this.filter = $(this.html.filter);
    this.filters = [];
    this.current = 0;
  }

  Filter.prototype.pluginInit = function() {
    var filter, _i, _len, _ref;
    _ref = this.options.filters;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      filter = _ref[_i];
      this.addFilter(filter);
    }
    this.updateHighlights();
    this._setupListeners()._insertSpacer();
    if (this.options.addAnnotationFilter === true) {
      return this.addFilter({
        label: Annotator._t('Annotation'),
        property: 'text'
      });
    }
  };

  Filter.prototype.destroy = function() {
    var currentMargin, html;
    Filter.__super__.destroy.apply(this, arguments);
    html = $('html');
    currentMargin = parseInt(html.css('padding-top'), 10) || 0;
    html.css('padding-top', currentMargin - this.element.outerHeight());
    return this.element.remove();
  };

  Filter.prototype._insertSpacer = function() {
    var currentMargin, html;
    html = $('html');
    currentMargin = parseInt(html.css('padding-top'), 10) || 0;
    html.css('padding-top', currentMargin + this.element.outerHeight());
    return this;
  };

  Filter.prototype._setupListeners = function() {
    var event, events, _i, _len;
    events = ['annotationsLoaded', 'annotationCreated', 'annotationUpdated', 'annotationDeleted'];
    for (_i = 0, _len = events.length; _i < _len; _i++) {
      event = events[_i];
      this.annotator.subscribe(event, this.updateHighlights);
    }
    return this;
  };

  Filter.prototype.addFilter = function(options) {
    var f, filter;
    filter = $.extend({
      label: '',
      property: '',
      isFiltered: this.options.isFiltered
    }, options);
    if (!((function() {
      var _i, _len, _ref, _results;
      _ref = this.filters;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        f = _ref[_i];
        if (f.property === filter.property) {
          _results.push(f);
        }
      }
      return _results;
    }).call(this)).length) {
      filter.id = 'annotator-filter-' + filter.property;
      filter.annotations = [];
      filter.element = this.filter.clone().appendTo(this.element);
      filter.element.find('label').html(filter.label).attr('for', filter.id);
      filter.element.find('input').attr({
        id: filter.id,
        placeholder: Annotator._t('Filter by ') + filter.label + '\u2026'
      });
      filter.element.find('button').hide();
      filter.element.data('filter', filter);
      this.filters.push(filter);
    }
    return this;
  };

  Filter.prototype.updateFilter = function(filter) {
    var annotation, annotations, input, property, _i, _len, _ref;
    filter.annotations = [];
    this.updateHighlights();
    this.resetHighlights();
    input = $.trim(filter.element.find('input').val());
    if (input) {
      annotations = this.highlights.map(function() {
        return $(this).data('annotation');
      });
      _ref = $.makeArray(annotations);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        annotation = _ref[_i];
        property = annotation[filter.property];
        if (filter.isFiltered(input, property)) {
          filter.annotations.push(annotation);
        }
      }
      return this.filterHighlights();
    }
  };

  Filter.prototype.updateHighlights = function() {
    this.highlights = this.annotator.element.find('.annotator-hl:visible');
    return this.filtered = this.highlights.not(this.classes.hl.hide);
  };

  Filter.prototype.filterHighlights = function() {
    var activeFilters, annotation, annotations, filtered, highlights, index, uniques, _i, _len, _ref;
    activeFilters = $.grep(this.filters, function(filter) {
      return !!filter.annotations.length;
    });
    filtered = ((_ref = activeFilters[0]) != null ? _ref.annotations : void 0) || [];
    if (activeFilters.length > 1) {
      annotations = [];
      $.each(activeFilters, function() {
        return $.merge(annotations, this.annotations);
      });
      uniques = [];
      filtered = [];
      $.each(annotations, function() {
        if ($.inArray(this, uniques) === -1) {
          return uniques.push(this);
        } else {
          return filtered.push(this);
        }
      });
    }
    highlights = this.highlights;
    for (index = _i = 0, _len = filtered.length; _i < _len; index = ++_i) {
      annotation = filtered[index];
      highlights = highlights.not(annotation.highlights);
    }
    highlights.addClass(this.classes.hl.hide);
    this.filtered = this.highlights.not(this.classes.hl.hide);
    return this;
  };

  Filter.prototype.resetHighlights = function() {
    this.highlights.removeClass(this.classes.hl.hide);
    this.filtered = this.highlights;
    return this;
  };

  Filter.prototype._onFilterFocus = function(event) {
    var input;
    input = $(event.target);
    input.parent().addClass(this.classes.active);
    return input.next('button').show();
  };

  Filter.prototype._onFilterBlur = function(event) {
    var input;
    if (!event.target.value) {
      input = $(event.target);
      input.parent().removeClass(this.classes.active);
      return input.next('button').hide();
    }
  };

  Filter.prototype._onFilterKeyup = function(event) {
    var filter;
    filter = $(event.target).parent().data('filter');
    if (filter) {
      return this.updateFilter(filter);
    }
  };

  Filter.prototype._findNextHighlight = function(previous) {
    var active, annotation, current, index, next, offset, operator, resetOffset;
    if (!this.highlights.length) {
      return this;
    }
    offset = previous ? 0 : -1;
    resetOffset = previous ? -1 : 0;
    operator = previous ? 'lt' : 'gt';
    active = this.highlights.not('.' + this.classes.hl.hide);
    current = active.filter('.' + this.classes.hl.active);
    if (!current.length) {
      current = active.eq(offset);
    }
    annotation = current.data('annotation');
    index = active.index(current[0]);
    next = active.filter(":" + operator + "(" + index + ")").not(annotation.highlights).eq(resetOffset);
    if (!next.length) {
      next = active.eq(resetOffset);
    }
    return this._scrollToHighlight(next.data('annotation').highlights);
  };

  Filter.prototype._onNextClick = function(event) {
    return this._findNextHighlight();
  };

  Filter.prototype._onPreviousClick = function(event) {
    return this._findNextHighlight(true);
  };

  Filter.prototype._scrollToHighlight = function(highlight) {
    highlight = $(highlight);
    this.highlights.removeClass(this.classes.hl.active);
    highlight.addClass(this.classes.hl.active);
    return $('html, body').animate({
      scrollTop: highlight.offset().top - (this.element.height() + 20)
    }, 150);
  };

  Filter.prototype._onClearClick = function(event) {
    return $(event.target).prev('input').val('').keyup().blur();
  };

  return Filter;

})(Annotator.Plugin);

Annotator.Plugin.register('Filter', Filter);

module.exports = Filter;


},{}]},{},[3])

(3)
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGtnL2Fubm90YXRvci5maWx0ZXIuanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJuYW1lc3BhY2UuY29mZmVlIiwicGx1Z2luL2ZpbHRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FDS0E7OztTQUFPLElBQVA7OztBQUNBOztXQUFRO0dBQVI7Q0FEQTs7QUFFQTs7V0FBUTtHQUFSO0NBRkE7Ozs7O0VBTUEsc0JBQWE7Q0FOYjs7QUFVQTtBQUNFLFFBQVUsVUFBTSxvQkFEbEI7Q0FWQTs7Ozs7Ozs7OztBQ0xBOzs7OztZQUFZLFFBQVEsV0FBUixDQUFaOztDQUNBLEdBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxDQURuQjs7RUFFQSxHQUFLLFNBQVMsQ0FBQyxFQUZmOzs7QUFNRTs7NEJBQ0U7OENBQTBDLGdCQUExQztJQUNBLHlDQUF5QyxlQUR6QztJQUVBLDBDQUEwQyxnQkFGMUM7SUFHQSxvQ0FBb0Msa0JBSHBDO0lBSUEsZ0NBQWdDLGNBSmhDO0lBS0EsaUNBQWlDLGVBTGpDO0dBREY7O21CQVNBLFVBQ0U7WUFBUSx5QkFBUjtJQUNBLElBQ0U7WUFBTSx1QkFBTjtNQUNBLFFBQVEscUJBRFI7S0FGRjtHQVZGOzttQkFnQkEsT0FDRTthQUFZLGlEQUVaLElBQUcsV0FBSCxFQUZZLEdBRUssMElBRkwsR0FLTSxJQUFHLFVBQUgsRUFMTixHQUtzQixzRkFMdEIsR0FPVixJQUFHLE1BQUgsRUFQVSxHQU9FLGtDQVBGLEdBT2lDLElBQUcsWUFBSCxFQVBqQyxHQU9tRCxtQkFQL0Q7SUFZQSxRQUFXLHNKQUtFLElBQUcsT0FBSCxFQUxGLEdBS2Usb0JBakIxQjtHQWpCRjs7bUJBdUNBLFVBRUU7Y0FBVSxNQUFWO0lBR0EsU0FBUyxFQUhUO0lBTUEscUJBQXFCLElBTnJCO0lBeUJBLFlBQVksU0FBQyxLQUFELEVBQVEsUUFB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QUMsUUFBVixDQUFtQixJQUFDLFFBQU8sQ0FBQyxFQUFFLENBQUMsTUFBL0IsQ0FIQTtXQUtBLEVBQUUsWUFBRixDQUFlLENBQUMsT0FBaEIsQ0FBd0I7TUFDdEIsV0FBVyxTQUFTLENBQUMsTUFBVixFQUFrQixDQUFDLEdBQW5CLEdBQXlCLENBQUMsSUFBQyxRQUFPLENBQUMsTUFBVCxLQUFvQixFQUFyQixDQURkO0tBQXhCLEVBRUcsR0FGSCxFQU5rQjtHQXpXcEI7O21CQXdYQSxnQkFBZSxTQUFDLEtBQUQ7V0FDYixFQUFFLEtBQUssQ0FBQyxNQUFSLENBQWUsQ0FBQyxJQUFoQixDQUFxQixPQUFyQixDQUE2QixDQUFDLEdBQTlCLENBQWtDLEVBQWxDLENBQXFDLENBQUMsS0FBdEMsRUFBNkMsQ0FBQyxJQUE5QyxHQURhO0dBeFhmOzs7O0dBRm1CLFNBQVMsQ0FBQyxPQUovQjs7U0FpWVMsQ0FBQyxNQUFNLENBQUMsUUFBakIsQ0FBMEIsUUFBMUIsRUFBb0MsTUFBcEMsQ0FqWUE7O01BbVlNLENBQUMsT0FBUCxHQUFpQixNQW5ZakIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiMgSW4gb3JkZXIgdG8gYnVpbGQgcG9ydGFibGUgZXh0ZW5zaW9uIGJ1bmRsZXMgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIEFNRCBhbmRcbiMgc2NyaXB0IGNvbmNhdGVuYXRpb24gcGx1Z2lucyBhcmUgYnVpbHQgd2l0aCB0aGlzIG1vZHVsZSBhcyAnYW5ub3RhdG9yJy5cblxuIyBBbm5vdGF0b3Igd2lsbCBleHBvcnQgaXRzZWxmIGdsb2JhbGx5IHdoZW4gdGhlIGJ1aWx0IFVNRCBtb2R1bGVzIGFyZSB1c2VkIGluXG4jIGEgbGVnYWN5IGVudmlyb25tZW50IG9mIHNpbXBsZSBzY3JpcHQgY29uY2F0ZW5hdGlvbi5cbnNlbGYgPSBzZWxmIGlmIHNlbGY/XG5zZWxmID89IGdsb2JhbCBpZiBnbG9iYWw/XG5zZWxmID89IHdpbmRvdyBpZiB3aW5kb3c/XG5Bbm5vdGF0b3IgPSBzZWxmPy5Bbm5vdGF0b3JcblxuIyBJbiBhIHB1cmUgQU1EIGVudmlyb25tZW50LCBBbm5vdGF0b3IgbWF5IG5vdCBiZSBleHBvcnRlZCBnbG9iYWxseS5cbkFubm90YXRvciA/PSBpZiBzZWxmPy5kZWZpbmU/LmFtZCB0aGVuIHNlbGY/LnJlcXVpcmUoJ2Fubm90YXRvcicpXG5cbiMgSWYgd2UgaGF2ZW4ndCBzdWNjZXNzZnVsbHkgbG9hZGVkIEFubm90YXRvciBieSB0aGlzIHBvaW50LCB0aGVyZSdzIG5vIHBvaW50IGluXG4jIGdvaW5nIG9uIHRvIGxvYWQgdGhlIHBsdWdpbiwgc28gdGhyb3cgYSBmYXRhbCBlcnJvci5cbmlmIHR5cGVvZiBBbm5vdGF0b3IgaXNudCAnZnVuY3Rpb24nXG4gIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIEFubm90YXRvciEgSW4gYSB3ZWJwYWdlIGNvbnRleHQsIHBsZWFzZSBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICB0aGF0IHRoZSBBbm5vdGF0b3Igc2NyaXB0IHRhZyBpcyBsb2FkZWQgYmVmb3JlIGFueSBwbHVnaW5zLlwiKVxuXG4jIE5vdGU6IHdoZW4gd29ya2luZyBpbiBhIENvbW1vbkpTIGVudmlyb25tZW50IGFuZCBidW5kbGluZyByZXF1aXJlbWVudHMgaW50b1xuIyBhcHBsaWNhdGlvbnMgdGhlbiByZXF1aXJlIGNhbGxzIHNob3VsZCByZWZlciB0byBtb2R1bGVzIGZyb20gdGhlIG5wbSBsaWJcbiMgZGlyZWN0b3J5IG9mIGFubm90YXRvciBwYWNrYWdlIGFuZCBhdm9pZCB0aGlzIGFsdG9nZXRoZXIuXG5tb2R1bGUuZXhwb3J0cyA9IEFubm90YXRvclxuIiwiQW5ub3RhdG9yID0gcmVxdWlyZSgnYW5ub3RhdG9yJylcbiQgPSBBbm5vdGF0b3IuVXRpbC4kXG5fdCA9IEFubm90YXRvci5fdFxuXG5jbGFzcyBGaWx0ZXIgZXh0ZW5kcyBBbm5vdGF0b3IuUGx1Z2luXG4gICMgRXZlbnRzIGFuZCBjYWxsYmFja3MgdG8gYmluZCB0byB0aGUgRmlsdGVyI2VsZW1lbnQuXG4gIGV2ZW50czpcbiAgICBcIi5hbm5vdGF0b3ItZmlsdGVyLXByb3BlcnR5IGlucHV0IGZvY3VzXCI6IFwiX29uRmlsdGVyRm9jdXNcIlxuICAgIFwiLmFubm90YXRvci1maWx0ZXItcHJvcGVydHkgaW5wdXQgYmx1clwiOiBcIl9vbkZpbHRlckJsdXJcIlxuICAgIFwiLmFubm90YXRvci1maWx0ZXItcHJvcGVydHkgaW5wdXQga2V5dXBcIjogXCJfb25GaWx0ZXJLZXl1cFwiXG4gICAgXCIuYW5ub3RhdG9yLWZpbHRlci1wcmV2aW91cyBjbGlja1wiOiBcIl9vblByZXZpb3VzQ2xpY2tcIlxuICAgIFwiLmFubm90YXRvci1maWx0ZXItbmV4dCBjbGlja1wiOiBcIl9vbk5leHRDbGlja1wiXG4gICAgXCIuYW5ub3RhdG9yLWZpbHRlci1jbGVhciBjbGlja1wiOiBcIl9vbkNsZWFyQ2xpY2tcIlxuXG4gICMgQ29tbW9uIGNsYXNzZXMgdXNlZCB0byBjaGFuZ2UgcGx1Z2luIHN0YXRlLlxuICBjbGFzc2VzOlxuICAgIGFjdGl2ZTogJ2Fubm90YXRvci1maWx0ZXItYWN0aXZlJ1xuICAgIGhsOlxuICAgICAgaGlkZTogJ2Fubm90YXRvci1obC1maWx0ZXJlZCdcbiAgICAgIGFjdGl2ZTogJ2Fubm90YXRvci1obC1hY3RpdmUnXG5cbiAgIyBIVE1MIHRlbXBsYXRlcyBmb3IgdGhlIHBsdWdpbiBVSS5cbiAgaHRtbDpcbiAgICBlbGVtZW50OiBcIlwiXCJcbiAgICAgIDxkaXYgY2xhc3M9XCJhbm5vdGF0b3ItZmlsdGVyXCI+XG4gICAgICAgIDxzdHJvbmc+I3tfdCgnTmF2aWdhdGU6Jyl9PC9zdHJvbmc+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiYW5ub3RhdG9yLWZpbHRlci1uYXZpZ2F0aW9uXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYW5ub3RhdG9yLWZpbHRlci1wcmV2aW91c1wiPiN7X3QoJ1ByZXZpb3VzJyl9PC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYW5ub3RhdG9yLWZpbHRlci1uZXh0XCI+I3tfdCgnTmV4dCcpfTwvYnV0dG9uPlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxzdHJvbmc+I3tfdCgnRmlsdGVyIGJ5OicpfTwvc3Ryb25nPlxuICAgICAgPC9kaXY+XG4gICAgICBcIlwiXCJcbiAgICBmaWx0ZXI6IFwiXCJcIlxuICAgICAgPHNwYW4gY2xhc3M9XCJhbm5vdGF0b3ItZmlsdGVyLXByb3BlcnR5XCI+XG4gICAgICAgIDxsYWJlbD48L2xhYmVsPlxuICAgICAgICA8aW5wdXQvPlxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYW5ub3RhdG9yLWZpbHRlci1jbGVhclwiPiN7X3QoJ0NsZWFyJyl9PC9idXR0b24+XG4gICAgICA8L3NwYW4+XG4gICAgICBcIlwiXCJcblxuICAjIERlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIHBsdWdpbi5cbiAgb3B0aW9uczpcbiAgICAjIEEgQ1NTIHNlbGVjdG9yIG9yIEVsZW1lbnQgdG8gYXBwZW5kIHRoZSBwbHVnaW4gdG9vbGJhciB0by5cbiAgICBhcHBlbmRUbzogJ2JvZHknXG5cbiAgICAjIEFuIGFycmF5IG9mIGZpbHRlcnMgY2FuIGJlIHByb3ZpZGVkIG9uIGluaXRpYWxpc2F0aW9uLlxuICAgIGZpbHRlcnM6IFtdXG5cbiAgICAjIEFkZHMgYSBkZWZhdWx0IGZpbHRlciBvbiBhbm5vdGF0aW9ucy5cbiAgICBhZGRBbm5vdGF0aW9uRmlsdGVyOiB0cnVlXG5cbiAgICAjIFB1YmxpYzogRGV0ZXJtaW5lcyBpZiB0aGUgcHJvcGVydHkgaXMgY29udGFpbmVkIHdpdGhpbiB0aGUgcHJvdmlkZWRcbiAgICAjIGFubm90YXRpb24gcHJvcGVydHkuIERlZmF1bHQgaXMgdG8gc3BsaXQgdGhlIHN0cmluZyBvbiBzcGFjZXMgYW5kIG9ubHlcbiAgICAjIHJldHVybiB0cnVlIGlmIGFsbCBrZXl3b3JkcyBhcmUgY29udGFpbmVkIGluIHRoZSBzdHJpbmcuIFRoaXMgbWV0aG9kXG4gICAgIyBjYW4gYmUgb3ZlcnJpZGRlbiBieSB0aGUgdXNlciB3aGVuIGluaXRpYWxpc2luZyB0aGUgcGx1Z2luLlxuICAgICNcbiAgICAjIHN0cmluZyAgIC0gQW4gaW5wdXQgU3RyaW5nIGZyb20gdGhlIGZpdGxlci5cbiAgICAjIHByb3BlcnR5IC0gVGhlIGFubm90YXRpb24gcHJvcGVyeSB0byBxdWVyeS5cbiAgICAjXG4gICAgIyBFeGFtcGxlc1xuICAgICNcbiAgICAjICAgcGx1Z2luLm9wdGlvbi5nZXRLZXl3b3JkcygnaGVsbG8nLCAnaGVsbG8gd29ybGQgaG93IGFyZSB5b3U/JylcbiAgICAjICAgIyA9PiBSZXR1cm5zIHRydWVcbiAgICAjXG4gICAgIyAgIHBsdWdpbi5vcHRpb24uZ2V0S2V5d29yZHMoJ2hlbGxvIGJpbGwnLCAnaGVsbG8gd29ybGQgaG93IGFyZSB5b3U/JylcbiAgICAjICAgIyA9PiBSZXR1cm5zIGZhbHNlXG4gICAgI1xuICAgICMgUmV0dXJucyBhbiBBcnJheSBvZiBrZXl3b3JkIFN0cmluZ3MuXG4gICAgaXNGaWx0ZXJlZDogKGlucHV0LCBwcm9wZXJ0eSkgLT5cbiAgICAgIHJldHVybiBmYWxzZSB1bmxlc3MgaW5wdXQgYW5kIHByb3BlcnR5XG5cbiAgICAgIGZvciBrZXl3b3JkIGluIChpbnB1dC5zcGxpdCAvXFxzKy8pXG4gICAgICAgIHJldHVybiBmYWxzZSBpZiBwcm9wZXJ0eS5pbmRleE9mKGtleXdvcmQpID09IC0xXG5cbiAgICAgIHJldHVybiB0cnVlXG5cbiAgIyBQdWJsaWM6IENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIEZpbHRlciBwbHVnaW4uXG4gICNcbiAgIyBlbGVtZW50IC0gVGhlIEFubm90YXRvciBlbGVtZW50ICh0aGlzIGlzIGlnbm9yZWQgYnkgdGhlIHBsdWdpbikuXG4gICMgb3B0aW9ucyAtIEFuIE9iamVjdCBsaXRlcmFsIG9mIG9wdGlvbnMuXG4gICNcbiAgIyBFeGFtcGxlc1xuICAjXG4gICMgICBmaWx0ZXIgPSBuZXcgRmlsdGVyKGFubm90YXRvci5lbGVtZW50KVxuICAjXG4gICMgUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgRmlsdGVyIHBsdWdpbi5cbiAgY29uc3RydWN0b3I6IChlbGVtZW50LCBvcHRpb25zKSAtPlxuICAgICMgQXMgbW9zdCBldmVudHMgZm9yIHRoaXMgcGx1Z2luIGFyZSByZWxhdGl2ZSB0byB0aGUgdG9vbGJhciB3aGljaCBpc1xuICAgICMgbm90IGluc2lkZSB0aGUgQW5ub3RhdG9yI0VsZW1lbnQgd2Ugb3ZlcnJpZGUgdGhlIGVsZW1lbnQgcHJvcGVydHkuXG4gICAgIyBBbm5vdGF0b3IjRWxlbWVudCBjYW4gc3RpbGwgYmUgYWNjZXNzZWQgdmlhIEBhbm5vdGF0b3IuZWxlbWVudC5cbiAgICBlbGVtZW50ID0gJChAaHRtbC5lbGVtZW50KS5hcHBlbmRUbyhvcHRpb25zPy5hcHBlbmRUbyBvciBAb3B0aW9ucy5hcHBlbmRUbylcblxuICAgIHN1cGVyIGVsZW1lbnQsIG9wdGlvbnNcblxuICAgIEBvcHRpb25zLmZpbHRlcnMgb3I9IFtdXG5cbiAgICBAZmlsdGVyICA9ICQoQGh0bWwuZmlsdGVyKVxuICAgIEBmaWx0ZXJzID0gW11cbiAgICBAY3VycmVudCAgPSAwXG5cbiAgIyBQdWJsaWM6IEFkZHMgbmV3IGZpbHRlcnMuIFVwZGF0ZXMgdGhlIEBoaWdobGlnaHRzIGNhY2hlIGFuZCBjcmVhdGVzIGV2ZW50XG4gICMgbGlzdGVuZXJzIG9uIHRoZSBhbm5vdGF0b3Igb2JqZWN0LlxuICAjXG4gICMgUmV0dXJucyBub3RoaW5nLlxuICBwbHVnaW5Jbml0OiAtPlxuICAgIGZvciBmaWx0ZXIgaW4gQG9wdGlvbnMuZmlsdGVyc1xuICAgICAgdGhpcy5hZGRGaWx0ZXIoZmlsdGVyKVxuXG4gICAgdGhpcy51cGRhdGVIaWdobGlnaHRzKClcbiAgICB0aGlzLl9zZXR1cExpc3RlbmVycygpLl9pbnNlcnRTcGFjZXIoKVxuXG4gICAgaWYgQG9wdGlvbnMuYWRkQW5ub3RhdGlvbkZpbHRlciA9PSB0cnVlXG4gICAgICB0aGlzLmFkZEZpbHRlciB7bGFiZWw6IEFubm90YXRvci5fdCgnQW5ub3RhdGlvbicpLCBwcm9wZXJ0eTogJ3RleHQnfVxuXG4gICMgUHVibGljOiByZW1vdmUgdGhlIGZpbHRlciBwbHVnaW4gaW5zdGFuY2UgYW5kIHVuYmluZCBldmVudHMuXG4gICNcbiAgIyBSZXR1cm5zIG5vdGhpbmcuXG4gIGRlc3Ryb3k6IC0+XG4gICAgc3VwZXJcbiAgICBodG1sID0gJCgnaHRtbCcpXG4gICAgY3VycmVudE1hcmdpbiA9IHBhcnNlSW50KGh0bWwuY3NzKCdwYWRkaW5nLXRvcCcpLCAxMCkgfHwgMFxuICAgIGh0bWwuY3NzKCdwYWRkaW5nLXRvcCcsIGN1cnJlbnRNYXJnaW4gLSBAZWxlbWVudC5vdXRlckhlaWdodCgpKVxuICAgIEBlbGVtZW50LnJlbW92ZSgpXG5cbiAgIyBBZGRzIG1hcmdpbiB0byB0aGUgY3VycmVudCBkb2N1bWVudCB0byBlbnN1cmUgdGhhdCB0aGUgYW5ub3RhdGlvbiB0b29sYmFyXG4gICMgZG9lc24ndCBjb3ZlciB0aGUgcGFnZSB3aGVuIG5vdCBzY3JvbGxlZC5cbiAgI1xuICAjIFJldHVybnMgaXRzZWxmXG4gIF9pbnNlcnRTcGFjZXI6IC0+XG4gICAgaHRtbCA9ICQoJ2h0bWwnKVxuICAgIGN1cnJlbnRNYXJnaW4gPSBwYXJzZUludChodG1sLmNzcygncGFkZGluZy10b3AnKSwgMTApIHx8IDBcbiAgICBodG1sLmNzcygncGFkZGluZy10b3AnLCBjdXJyZW50TWFyZ2luICsgQGVsZW1lbnQub3V0ZXJIZWlnaHQoKSlcbiAgICB0aGlzXG5cbiAgIyBMaXN0ZW5zIHRvIGFubm90YXRpb24gY2hhbmdlIGV2ZW50cyBvbiB0aGUgQW5ub3RhdG9yIGluIG9yZGVyIHRvIHJlZnJlc2hcbiAgIyB0aGUgQGFubm90YXRpb25zIGNvbGxlY3Rpb24uXG4gICMgVE9ETzogTWFrZSB0aGlzIG1vcmUgZ3JhbnVsYXIgc28gdGhlIGVudGlyZSBjb2xsZWN0aW9uIGlzbid0IHJlbG9hZGVkIGZvclxuICAjIGV2ZXJ5IHNpbmdsZSBjaGFuZ2UuXG4gICNcbiAgIyBSZXR1cm5zIGl0c2VsZi5cbiAgX3NldHVwTGlzdGVuZXJzOiAtPlxuICAgIGV2ZW50cyA9IFtcbiAgICAgICdhbm5vdGF0aW9uc0xvYWRlZCcsICdhbm5vdGF0aW9uQ3JlYXRlZCcsXG4gICAgICAnYW5ub3RhdGlvblVwZGF0ZWQnLCAnYW5ub3RhdGlvbkRlbGV0ZWQnXG4gICAgXVxuXG4gICAgZm9yIGV2ZW50IGluIGV2ZW50c1xuICAgICAgQGFubm90YXRvci5zdWJzY3JpYmUgZXZlbnQsIHRoaXMudXBkYXRlSGlnaGxpZ2h0c1xuICAgIHRoaXNcblxuICAjIFB1YmxpYzogQWRkcyBhIGZpbHRlciB0byB0aGUgdG9vbGJhci4gVGhlIGZpbHRlciBtdXN0IGhhdmUgYm90aCBhIGxhYmVsXG4gICMgYW5kIGEgcHJvcGVydHkgb2YgYW4gYW5ub3RhdGlvbiBvYmplY3QgdG8gZmlsdGVyIG9uLlxuICAjXG4gICMgb3B0aW9ucyAtIEFuIE9iamVjdCBsaXRlcmFsIGNvbnRhaW5pbmcgdGhlIGZpbHRlcnMgb3B0aW9ucy5cbiAgIyAgICAgICAgICAgbGFiZWwgICAgICAtIEEgcHVibGljIGZhY2luZyBTdHJpbmcgdG8gcmVwcmVzZW50IHRoZSBmaWx0ZXIuXG4gICMgICAgICAgICAgIHByb3BlcnR5ICAgLSBBbiBhbm5vdGF0aW9uIHByb3BlcnR5IFN0cmluZyB0byBmaWx0ZXIgb24uXG4gICMgICAgICAgICAgIGlzRmlsdGVyZWQgLSBBIGNhbGxiYWNrIEZ1bmN0aW9uIHRoYXQgcmVjaWV2ZXMgdGhlIGZpZWxkIGlucHV0XG4gICMgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSBhbmQgdGhlIGFubm90YXRpb24gcHJvcGVydHkgdmFsdWUuIFNlZVxuICAjICAgICAgICAgICAgICAgICAgICAgICAgQG9wdGlvbnMuaXNGaWx0ZXJlZCgpIGZvciBkZXRhaWxzLlxuICAjXG4gICMgRXhhbXBsZXNcbiAgI1xuICAjICAgIyBTZXQgdXAgYSBmaWx0ZXIgdG8gZmlsdGVyIG9uIHRoZSBhbm5vdGF0aW9uLnVzZXIgcHJvcGVydHkuXG4gICMgICBmaWx0ZXIuYWRkRmlsdGVyKHtcbiAgIyAgICAgbGFiZWw6IFVzZXIsXG4gICMgICAgIHByb3BlcnR5OiAndXNlcidcbiAgIyAgIH0pXG4gICNcbiAgIyBSZXR1cm5zIGl0c2VsZiB0byBhbGxvdyBjaGFpbmluZy5cbiAgYWRkRmlsdGVyOiAob3B0aW9ucykgLT5cbiAgICBmaWx0ZXIgPSAkLmV4dGVuZCh7XG4gICAgICBsYWJlbDogJydcbiAgICAgIHByb3BlcnR5OiAnJ1xuICAgICAgaXNGaWx0ZXJlZDogQG9wdGlvbnMuaXNGaWx0ZXJlZFxuICAgIH0sIG9wdGlvbnMpXG5cbiAgICAjIFNraXAgaWYgYSBmaWx0ZXIgZm9yIHRoaXMgcHJvcGVydHkgaGFzIGJlZW4gbG9hZGVkLlxuICAgIHVubGVzcyAoZiBmb3IgZiBpbiBAZmlsdGVycyB3aGVuIGYucHJvcGVydHkgPT0gZmlsdGVyLnByb3BlcnR5KS5sZW5ndGhcbiAgICAgIGZpbHRlci5pZCA9ICdhbm5vdGF0b3ItZmlsdGVyLScgKyBmaWx0ZXIucHJvcGVydHlcbiAgICAgIGZpbHRlci5hbm5vdGF0aW9ucyA9IFtdXG4gICAgICBmaWx0ZXIuZWxlbWVudCA9IEBmaWx0ZXIuY2xvbmUoKS5hcHBlbmRUbyhAZWxlbWVudClcbiAgICAgIGZpbHRlci5lbGVtZW50LmZpbmQoJ2xhYmVsJylcbiAgICAgICAgLmh0bWwoZmlsdGVyLmxhYmVsKVxuICAgICAgICAuYXR0cignZm9yJywgZmlsdGVyLmlkKVxuICAgICAgZmlsdGVyLmVsZW1lbnQuZmluZCgnaW5wdXQnKVxuICAgICAgICAuYXR0cih7XG4gICAgICAgICAgaWQ6IGZpbHRlci5pZFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiBBbm5vdGF0b3IuX3QoJ0ZpbHRlciBieSAnKSArIGZpbHRlci5sYWJlbCArICdcXHUyMDI2J1xuICAgICAgICB9KVxuICAgICAgZmlsdGVyLmVsZW1lbnQuZmluZCgnYnV0dG9uJykuaGlkZSgpXG5cbiAgICAgICMgQWRkIHRoZSBmaWx0ZXIgdG8gdGhlIGVsZW1lbnRzIGRhdGEgc3RvcmUuXG4gICAgICBmaWx0ZXIuZWxlbWVudC5kYXRhICdmaWx0ZXInLCBmaWx0ZXJcblxuICAgICAgQGZpbHRlcnMucHVzaCBmaWx0ZXJcblxuICAgIHRoaXNcblxuICAjIFB1YmxpYzogVXBkYXRlcyB0aGUgZmlsdGVyLmFubm90YXRpb25zIHByb3BlcnR5LiBUaGVuIHVwZGF0ZXMgdGhlIHN0YXRlXG4gICMgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBET00uIENhbGxzIHRoZSBmaWx0ZXIuaXNGaWx0ZXJlZCgpIG1ldGhvZCB0b1xuICAjIGRldGVybWluZSBpZiB0aGUgYW5ub3RhdGlvbiBzaG91bGQgcmVtYWluLlxuICAjXG4gICMgZmlsdGVyIC0gQSBmaWx0ZXIgT2JqZWN0IGZyb20gQGZpbHRlcnNcbiAgI1xuICAjIEV4YW1wbGVzXG4gICNcbiAgIyAgIGZpbHRlci51cGRhdGVGaWx0ZXIobXlGaWx0ZXIpXG4gICNcbiAgIyBSZXR1cm5zIGl0c2VsZiBmb3IgY2hhaW5pbmdcbiAgdXBkYXRlRmlsdGVyOiAoZmlsdGVyKSAtPlxuICAgIGZpbHRlci5hbm5vdGF0aW9ucyA9IFtdXG5cbiAgICB0aGlzLnVwZGF0ZUhpZ2hsaWdodHMoKVxuICAgIHRoaXMucmVzZXRIaWdobGlnaHRzKClcbiAgICBpbnB1dCA9ICQudHJpbSBmaWx0ZXIuZWxlbWVudC5maW5kKCdpbnB1dCcpLnZhbCgpXG5cbiAgICBpZiBpbnB1dFxuICAgICAgIyBjb2ZmZWVsaW50OiBkaXNhYmxlPW1pc3NpbmdfZmF0X2Fycm93c1xuICAgICAgYW5ub3RhdGlvbnMgPSBAaGlnaGxpZ2h0cy5tYXAgLT4gJCh0aGlzKS5kYXRhKCdhbm5vdGF0aW9uJylcbiAgICAgICMgY29mZmVlbGludDogZW5hYmxlPW1pc3NpbmdfZmF0X2Fycm93c1xuXG4gICAgICBmb3IgYW5ub3RhdGlvbiBpbiAkLm1ha2VBcnJheShhbm5vdGF0aW9ucylcbiAgICAgICAgcHJvcGVydHkgPSBhbm5vdGF0aW9uW2ZpbHRlci5wcm9wZXJ0eV1cbiAgICAgICAgaWYgZmlsdGVyLmlzRmlsdGVyZWQgaW5wdXQsIHByb3BlcnR5XG4gICAgICAgICAgZmlsdGVyLmFubm90YXRpb25zLnB1c2ggYW5ub3RhdGlvblxuXG4gICAgICB0aGlzLmZpbHRlckhpZ2hsaWdodHMoKVxuXG4gICMgUHVibGljOiBVcGRhdGVzIHRoZSBAaGlnaGxpZ2h0cyBwcm9wZXJ0eSB3aXRoIHRoZSBsYXRlc3QgaGlnaGxpZ2h0XG4gICMgZWxlbWVudHMgaW4gdGhlIERPTS5cbiAgI1xuICAjIFJldHVybnMgYSBqUXVlcnkgY29sbGVjdGlvbiBvZiB0aGUgaGlnaGxpZ2h0IGVsZW1lbnRzLlxuICB1cGRhdGVIaWdobGlnaHRzOiA9PlxuICAgICMgSWdub3JlIGFueSBoaWRkZW4gaGlnaGxpZ2h0cy5cbiAgICBAaGlnaGxpZ2h0cyA9IEBhbm5vdGF0b3IuZWxlbWVudC5maW5kKCcuYW5ub3RhdG9yLWhsOnZpc2libGUnKVxuICAgIEBmaWx0ZXJlZCAgID0gQGhpZ2hsaWdodHMubm90KEBjbGFzc2VzLmhsLmhpZGUpXG5cbiAgIyBQdWJsaWM6IFJ1bnMgdGhyb3VnaCBlYWNoIG9mIHRoZSBmaWx0ZXJzIGFuZCByZW1vdmVzIGFsbCBoaWdobGlnaHRzIG5vdFxuICAjIGN1cnJlbnRseSBpbiBzY29wZS5cbiAgI1xuICAjIFJldHVybnMgaXRzZWxmIGZvciBjaGFpbmluZy5cbiAgZmlsdGVySGlnaGxpZ2h0czogLT5cbiAgICBhY3RpdmVGaWx0ZXJzID0gJC5ncmVwIEBmaWx0ZXJzLCAoZmlsdGVyKSAtPiAhIWZpbHRlci5hbm5vdGF0aW9ucy5sZW5ndGhcblxuICAgIGZpbHRlcmVkID0gYWN0aXZlRmlsdGVyc1swXT8uYW5ub3RhdGlvbnMgfHwgW11cbiAgICBpZiBhY3RpdmVGaWx0ZXJzLmxlbmd0aCA+IDFcbiAgICAgICMgSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZmlsdGVyIHRoZW4gb25seSBhbm5vdGF0aW9ucyBtYXRjaGVkIGluIGV2ZXJ5XG4gICAgICAjIGZpbHRlciBzaG91bGQgcmVtYWluLlxuICAgICAgYW5ub3RhdGlvbnMgPSBbXVxuXG4gICAgICAjIGNvZmZlZWxpbnQ6IGRpc2FibGU9bWlzc2luZ19mYXRfYXJyb3dzXG5cbiAgICAgICQuZWFjaCBhY3RpdmVGaWx0ZXJzLCAtPlxuICAgICAgICAkLm1lcmdlKGFubm90YXRpb25zLCB0aGlzLmFubm90YXRpb25zKVxuXG4gICAgICB1bmlxdWVzICA9IFtdXG4gICAgICBmaWx0ZXJlZCA9IFtdXG4gICAgICAkLmVhY2ggYW5ub3RhdGlvbnMsIC0+XG4gICAgICAgIGlmICQuaW5BcnJheSh0aGlzLCB1bmlxdWVzKSA9PSAtMVxuICAgICAgICAgIHVuaXF1ZXMucHVzaCB0aGlzXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBmaWx0ZXJlZC5wdXNoIHRoaXNcblxuICAgICAgIyBjb2ZmZWVsaW50OiBlbmFibGU9bWlzc2luZ19mYXRfYXJyb3dzXG5cbiAgICBoaWdobGlnaHRzID0gQGhpZ2hsaWdodHNcbiAgICBmb3IgYW5ub3RhdGlvbiwgaW5kZXggaW4gZmlsdGVyZWRcbiAgICAgIGhpZ2hsaWdodHMgPSBoaWdobGlnaHRzLm5vdChhbm5vdGF0aW9uLmhpZ2hsaWdodHMpXG5cbiAgICBoaWdobGlnaHRzLmFkZENsYXNzKEBjbGFzc2VzLmhsLmhpZGUpXG5cbiAgICBAZmlsdGVyZWQgPSBAaGlnaGxpZ2h0cy5ub3QoQGNsYXNzZXMuaGwuaGlkZSlcbiAgICB0aGlzXG5cbiAgIyBQdWJsaWM6IFJlbW92ZXMgaGlkZGVuIGNsYXNzIGZyb20gYWxsIGFubm90YXRpb25zLlxuICAjXG4gICMgUmV0dXJucyBpdHNlbGYgZm9yIGNoYWluaW5nLlxuICByZXNldEhpZ2hsaWdodHM6IC0+XG4gICAgQGhpZ2hsaWdodHMucmVtb3ZlQ2xhc3MoQGNsYXNzZXMuaGwuaGlkZSlcbiAgICBAZmlsdGVyZWQgPSBAaGlnaGxpZ2h0c1xuICAgIHRoaXNcblxuICAjIFVwZGF0ZXMgdGhlIGZpbHRlciBmaWVsZCBvbiBmb2N1cy5cbiAgI1xuICAjIGV2ZW50IC0gQSBmb2N1cyBFdmVudCBvYmplY3QuXG4gICNcbiAgIyBSZXR1cm5zIG5vdGhpbmdcbiAgX29uRmlsdGVyRm9jdXM6IChldmVudCkgPT5cbiAgICBpbnB1dCA9ICQoZXZlbnQudGFyZ2V0KVxuICAgIGlucHV0LnBhcmVudCgpLmFkZENsYXNzKEBjbGFzc2VzLmFjdGl2ZSlcbiAgICBpbnB1dC5uZXh0KCdidXR0b24nKS5zaG93KClcblxuICAjIFVwZGF0ZXMgdGhlIGZpbHRlciBmaWVsZCBvbiBibHVyLlxuICAjXG4gICMgZXZlbnQgLSBBIGJsdXIgRXZlbnQgb2JqZWN0LlxuICAjXG4gICMgUmV0dXJucyBub3RoaW5nLlxuICBfb25GaWx0ZXJCbHVyOiAoZXZlbnQpID0+XG4gICAgdW5sZXNzIGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgaW5wdXQgPSAkKGV2ZW50LnRhcmdldClcbiAgICAgIGlucHV0LnBhcmVudCgpLnJlbW92ZUNsYXNzKEBjbGFzc2VzLmFjdGl2ZSlcbiAgICAgIGlucHV0Lm5leHQoJ2J1dHRvbicpLmhpZGUoKVxuXG4gICMgVXBkYXRlcyB0aGUgZmlsdGVyIGJhc2VkIG9uIHRoZSBpZCBvZiB0aGUgZmlsdGVyIGVsZW1lbnQuXG4gICNcbiAgIyBldmVudCAtIEEga2V5dXAgRXZlbnRcbiAgI1xuICAjIFJldHVybnMgbm90aGluZy5cbiAgX29uRmlsdGVyS2V5dXA6IChldmVudCkgPT5cbiAgICBmaWx0ZXIgPSAkKGV2ZW50LnRhcmdldCkucGFyZW50KCkuZGF0YSgnZmlsdGVyJylcbiAgICB0aGlzLnVwZGF0ZUZpbHRlciBmaWx0ZXIgaWYgZmlsdGVyXG5cbiAgIyBMb2NhdGVzIHRoZSBuZXh0L3ByZXZpb3VzIGhpZ2hsaWdodGVkIGVsZW1lbnQgaW4gQGhpZ2hsaWdodHMgZnJvbSB0aGVcbiAgIyBjdXJyZW50IG9uZSBvciBnb2VzIHRvIHRoZSB2ZXJ5IGZpcnN0L2xhc3QgZWxlbWVudCByZXNwZWN0aXZlbHkuXG4gICNcbiAgIyBwcmV2aW91cyAtIElmIHRydWUgZmluZHMgdGhlIHByZXZpb3VzbHkgaGlnaGxpZ2h0ZWQgZWxlbWVudC5cbiAgI1xuICAjIFJldHVybnMgaXRzZWxmLlxuICBfZmluZE5leHRIaWdobGlnaHQ6IChwcmV2aW91cykgLT5cbiAgICByZXR1cm4gdGhpcyB1bmxlc3MgQGhpZ2hsaWdodHMubGVuZ3RoXG5cbiAgICBvZmZzZXQgICAgICA9IGlmIHByZXZpb3VzIHRoZW4gMCAgICBlbHNlIC0xXG4gICAgcmVzZXRPZmZzZXQgPSBpZiBwcmV2aW91cyB0aGVuIC0xICAgZWxzZSAwXG4gICAgb3BlcmF0b3IgICAgPSBpZiBwcmV2aW91cyB0aGVuICdsdCcgZWxzZSAnZ3QnXG5cbiAgICBhY3RpdmUgID0gQGhpZ2hsaWdodHMubm90KCcuJyArIEBjbGFzc2VzLmhsLmhpZGUpXG4gICAgY3VycmVudCA9IGFjdGl2ZS5maWx0ZXIoJy4nICsgQGNsYXNzZXMuaGwuYWN0aXZlKVxuICAgIGN1cnJlbnQgPSBhY3RpdmUuZXEob2Zmc2V0KSB1bmxlc3MgY3VycmVudC5sZW5ndGhcblxuICAgIGFubm90YXRpb24gPSBjdXJyZW50LmRhdGEgJ2Fubm90YXRpb24nXG5cbiAgICBpbmRleCA9IGFjdGl2ZS5pbmRleCBjdXJyZW50WzBdXG4gICAgbmV4dCAgPSBhY3RpdmUuZmlsdGVyKFwiOiN7b3BlcmF0b3J9KCN7aW5kZXh9KVwiKVxuICAgICAgICAgICAgICAgICAgLm5vdChhbm5vdGF0aW9uLmhpZ2hsaWdodHMpXG4gICAgICAgICAgICAgICAgICAuZXEocmVzZXRPZmZzZXQpXG4gICAgbmV4dCAgPSBhY3RpdmUuZXEocmVzZXRPZmZzZXQpIHVubGVzcyBuZXh0Lmxlbmd0aFxuXG4gICAgdGhpcy5fc2Nyb2xsVG9IaWdobGlnaHQgbmV4dC5kYXRhKCdhbm5vdGF0aW9uJykuaGlnaGxpZ2h0c1xuXG4gICMgTG9jYXRlcyB0aGUgbmV4dCBoaWdobGlnaHRlZCBlbGVtZW50IGluIEBoaWdobGlnaHRzIGZyb20gdGhlIGN1cnJlbnQgb25lXG4gICMgb3IgZ29lcyB0byB0aGUgdmVyeSBmaXJzdCBlbGVtZW50LlxuICAjXG4gICMgZXZlbnQgLSBBIGNsaWNrIEV2ZW50LlxuICAjXG4gICMgUmV0dXJucyBub3RoaW5nXG4gIF9vbk5leHRDbGljazogKGV2ZW50KSA9PlxuICAgIHRoaXMuX2ZpbmROZXh0SGlnaGxpZ2h0KClcblxuICAjIExvY2F0ZXMgdGhlIHByZXZpb3VzIGhpZ2hsaWdodGVkIGVsZW1lbnQgaW4gQGhpZ2hsaWdodHMgZnJvbSB0aGUgY3VycmVudCBvbmVcbiAgIyBvciBnb2VzIHRvIHRoZSB2ZXJ5IGxhc3QgZWxlbWVudC5cbiAgI1xuICAjIGV2ZW50IC0gQSBjbGljayBFdmVudC5cbiAgI1xuICAjIFJldHVybnMgbm90aGluZ1xuICBfb25QcmV2aW91c0NsaWNrOiAoZXZlbnQpID0+XG4gICAgdGhpcy5fZmluZE5leHRIaWdobGlnaHQgdHJ1ZVxuXG4gICMgU2Nyb2xscyB0byB0aGUgaGlnaGxpZ2h0IHByb3ZpZGVkLiBBbiBhZGRzIGFuIGFjdGl2ZSBjbGFzcyB0byBpdC5cbiAgI1xuICAjIGhpZ2hsaWdodCAtIEVpdGhlciBoaWdobGlnaHQgRWxlbWVudCBvciBhbiBBcnJheSBvZiBlbGVtZW50cy4gVGhpcyB2YWx1ZVxuICAjICAgICAgICAgICAgIGlzIHVzdWFsbHkgcmV0cmlldmVkIGZyb20gYW5ub3RhdGlvbi5oaWdobGlnaHRzLlxuICAjXG4gICMgUmV0dXJucyBub3RoaW5nLlxuICBfc2Nyb2xsVG9IaWdobGlnaHQ6IChoaWdobGlnaHQpIC0+XG4gICAgaGlnaGxpZ2h0ID0gJChoaWdobGlnaHQpXG5cbiAgICBAaGlnaGxpZ2h0cy5yZW1vdmVDbGFzcyhAY2xhc3Nlcy5obC5hY3RpdmUpXG4gICAgaGlnaGxpZ2h0LmFkZENsYXNzKEBjbGFzc2VzLmhsLmFjdGl2ZSlcblxuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogaGlnaGxpZ2h0Lm9mZnNldCgpLnRvcCAtIChAZWxlbWVudC5oZWlnaHQoKSArIDIwKVxuICAgIH0sIDE1MClcblxuICAjIENsZWFycyB0aGUgcmVsZXZhbnQgaW5wdXQgd2hlbiB0aGUgY2xlYXIgYnV0dG9uIGlzIGNsaWNrZWQuXG4gICNcbiAgIyBldmVudCAtIEEgY2xpY2sgRXZlbnQgb2JqZWN0LlxuICAjXG4gICMgUmV0dXJucyBub3RoaW5nLlxuICBfb25DbGVhckNsaWNrOiAoZXZlbnQpIC0+XG4gICAgJChldmVudC50YXJnZXQpLnByZXYoJ2lucHV0JykudmFsKCcnKS5rZXl1cCgpLmJsdXIoKVxuXG5Bbm5vdGF0b3IuUGx1Z2luLnJlZ2lzdGVyKCdGaWx0ZXInLCBGaWx0ZXIpXG5cbm1vZHVsZS5leHBvcnRzID0gRmlsdGVyXG4iXX0=