{"version":3,"file":"bootstrap.min.js","sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","bootstrap.js"],"names":[],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\nAnnotator Bookmarklet\n=====================\n\nA Javascript bookmarklet wrapper around the Annotator plugin. This allows the\nuser to load the annotator into any web page and post the annotations to a\nserver (by default this is [AnnotateIt][#annotateit]).\n\nThe bookmarklet version of the annotator has the following plugins loaded:\n\n - [Auth][#wiki-auth]: authenticates with [AnnotateIt][#annotateit]\n - [Store][#wiki-store]: saves to [AnnotateIt][#annotateit]\n - [Permissions][#wiki-permissions]\n - [Unsupported][#wiki-unsupported]: displays a notification if the bookmarklet is run on an\n   unsupported browser\n\nand optionally, the [Tags plugin][#wiki-tags].\n\nConfiguration\n-------------\n\nIn order to configure the bookmarklet for your needs it accepts `config` hash of\noptions. These are set in the _config.json_ file. There's an example in the\nrepository (see _config.example.json_). The options are as follows:\n\n### externals\n\n - `source`: The generated Annotator Javascript source code (see Development)\n - `styles`: The generated Annotator CSS source code (see Development)\n\n### auth\n\nSettings for the [Auth plugin][#wiki-auth]\n\n- `tokenUrl`: The URL of the auth token generator to use (default: http://annotateit.org/api/token)\n\n### store\n\nSettings for the [Store plugin][#wiki-store].\n\n - `prefix`: The prefix URL for the store (default: http://annotateit.org/api)\n\n### permissions\n\nSettings for the [Permissions plugin][#wiki-permissions].\n\n#### tags\n\nIf this is set to `true` the [Tags plugin][#wiki-tags] will be loaded.\n*/\n(function (options, window, document) {\n  \"use strict\";\n\n  var body = document.body,\n      head = document.getElementsByTagName('head')[0],\n      globals = ['Annotator'],\n      isLoaded = {},\n      bookmarklet = {},\n      notification, namespace;\n\n  while (globals.length) {\n    namespace = globals.shift();\n    isLoaded[namespace] = window.hasOwnProperty(namespace);\n  }\n\n  notification = (function () {\n    var element = document.createElement('div'),\n        transition = 'top 0.4s ease-out',\n        styles  = {\n          display: 'block',\n          position: 'absolute',\n          fontFamily: '\"Helvetica Neue\", Arial, Helvetica, sans-serif',\n          fontSize: '14px',\n          color: '#fff',\n          top: '-54px',\n          left: 0,\n          width: '100%',\n          zIndex: 9999,\n          lineHeight: '50px',\n          textAlign: 'center',\n          backgroundColor: '#000',\n          borderBottom: '4px solid',\n          WebkitTransition: transition,\n          MozTransition: transition,\n          OTransition: transition,\n          transition: transition\n        }, property;\n\n    element.className = 'annotator-bm-status';\n    for (property in styles) {\n      if (styles.hasOwnProperty(property)) {\n        element.style[property] = styles[property];\n      }\n    }\n\n    // Apply newer styles for modern browsers.\n    element.style.position = 'fixed';\n    element.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';\n    element.onclick = function () {\n      this.parentNode.removeChild(this);\n    };\n\n    return {\n      status: {\n        INFO:    '#d4d4d4',\n        SUCCESS: '#3665f9',\n        ERROR:   '#ff7e00'\n      },\n      element: element,\n      show: function (message, status) {\n        this.message(message, status);\n\n        element.style.display = 'block';\n        element.style.visibility = 'visible';\n        element.style.top = '0';\n\n        return this;\n      },\n      hide: function () {\n        element.style.top = '-54px';\n\n        setTimeout(function () {\n          element.style.display = 'none';\n          element.style.visibility = 'hidden';\n        }, 400);\n\n        return this;\n      },\n      message: function (message, status) {\n        status = status || this.status.INFO;\n\n        element.style.borderColor = status;\n        element.innerHTML = message;\n\n        return this;\n      },\n      error: function (message) {\n        this.message(message, this.status.ERROR);\n        setTimeout(this.hide, 5000);\n        setTimeout(this.remove, 5500);\n      },\n      append: function () {\n        body.appendChild(element);\n        return this;\n      },\n      remove: function () {\n        var parent = element.parentNode;\n        if (parent) {\n          parent.removeChild(element);\n        }\n        return this;\n      }\n    }.append();\n  }());\n\n  bookmarklet = {\n    notification: notification,\n\n    keypath: function (object, path, fallback) {\n      var keys = (path || '').split('.'),\n          key;\n\n      while (object && keys.length) {\n        key = keys.shift();\n\n        if (object.hasOwnProperty(key)) {\n          object = object[key];\n\n          if (keys.length === 0 && object !== undefined) {\n            return object;\n          }\n        } else {\n          break;\n        }\n      }\n\n      return (fallback === null) ? null : fallback;\n    },\n\n    config: function (path, fallback) {\n      var value = this.keypath(options, path, fallback);\n\n      if (value === null) {\n        notification.error('Sorry, there was an error reading the bookmarklet setting for key: ' + path);\n      }\n\n      return value;\n    },\n\n    _injectElement: function (where, el) {\n      if (where == 'head') {\n        head.appendChild(el);\n      } else {\n        body.appendChild(el);\n      }\n    },\n\n    load: function (callback) {\n      var annotatorSource = this.config('externals.source', 'http://assets.annotateit.org/bookmarklet/annotator-bookmarklet.min.js'),\n          annotatorStyles = this.config('externals.styles', 'http://assets.annotateit.org/bookmarklet/annotator.min.css');\n\n      var link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = annotatorStyles;\n\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = annotatorSource;\n      script._loaded = false;\n\n      var scriptLoaded = function () {\n        script._loaded = true;\n        callback();\n      };\n\n      script.onload = scriptLoaded;\n      script.onreadystatechange = function() {\n        if ( this.readyState !== \"loaded\" && !script._loaded ) return;\n        scriptLoaded();\n      };\n\n      setTimeout(function () {\n        if (!script._loaded) {\n          notification.error('Sorry, we\\'re unable to load Annotator at the moment...');\n        }\n      }, 30000);\n\n      this._injectElement('head', link);\n      this._injectElement('body', script);\n    },\n\n    authOptions: function () {\n      return {\n        tokenUrl: this.config('auth.tokenUrl', 'http://annotateit.org/api/token'),\n        autoFetch: this.config('auth.autoFetch', true)\n      };\n    },\n\n    storeOptions: function () {\n      var uri = location.href.split(/#|\\?/).shift();\n      return {\n        prefix: this.config('store.prefix', 'http://annotateit.org/api'),\n        annotationData: { 'uri': uri },\n        loadFromSearch: { 'uri': uri }\n      };\n    },\n\n    annotateItPermissionsOptions: function () {\n      return this.config('annotateItPermissions', {});\n    },\n\n    setup: function () {\n      var annotator = new window.Annotator(options.target || body),\n        jQuery = window.Annotator.Util.$,\n        namespace;\n\n      annotator\n        .addPlugin('Unsupported')\n        .addPlugin('Auth', this.authOptions())\n        .addPlugin('Store', this.storeOptions())\n        .addPlugin('AnnotateItPermissions', this.annotateItPermissionsOptions());\n\n      if (this.config('tags') === true) {\n          annotator.addPlugin('Tags');\n      }\n\n      // Attach the annotator to the window object so we can prevent it\n      // being loaded twice and test.\n      jQuery.extend(window._annotator, {\n        jQuery: jQuery,\n        element: body,\n        instance: annotator,\n        Annotator: window.Annotator.noConflict()\n      });\n\n      // Clean up after ourselves by removing any properties on window that\n      // were not there before.\n      for (namespace in isLoaded) {\n        if (isLoaded.hasOwnProperty(namespace) && !isLoaded[namespace]) {\n          delete window[namespace];\n        }\n      }\n\n      notification.message('Annotator is ready!', notification.status.SUCCESS);\n      setTimeout(function () {\n        notification.hide();\n        setTimeout(notification.remove, 800);\n      }, 3000);\n    },\n\n    init: function () {\n      if (window._annotator.instance) {\n        window._annotator.Annotator.showNotification(\n          'Annotator is already loaded. Try highlighting some text to get started.'\n        );\n      } else {\n        notification.show('Loading Annotator into page');\n        bookmarklet.load(function () {\n          bookmarklet.setup();\n        });\n      }\n    }\n  };\n\n  // Export the bookmarklet to the window object for testing.\n  if (!window._annotator) {\n    window._annotator = {\n      bookmarklet: bookmarklet\n    };\n  }\n\n  // Load the bookmarklet.\n  if (!options.test) {\n    bookmarklet.init();\n  }\n}(window._annotatorConfig, window, window.document));\n"]}